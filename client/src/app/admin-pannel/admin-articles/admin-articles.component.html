<p class="fs-4 fs-md-3 fs-lg-2">üìù Manage Articles</p>


<form [formGroup]="articleForm" (ngSubmit)="onSubmit()" enctype="multipart/form-data" class="article-form">
  <div class="form-group">
    <label for="title">Title</label>
    <input id="title" formControlName="title" type="text" placeholder="Enter article title" required />
  </div>

  <div class="form-group">
    <label for="body">Body</label>
    <textarea
  id="body"
  formControlName="body"
  rows="5"
  placeholder="Enter article content"
  required
  (input)="autoGrow($event)"
  #bodyTextarea
></textarea>

  </div>

   <!-- ‚úÖ Show current image when editing -->
  <div *ngIf="editingArticleId && articleForm.value.title" class="form-group">
    <p><strong>Current Image:</strong></p>
    <img [src]="'http://localhost:5000' + getCurrentArticle()?.imageUrl" width="200" />
  </div>


  <div class="form-group">
    <label for="image">Image</label>
    <input id="image" type="file" (change)="onFileSelected($event)" [required]="!editingArticleId" />
  </div>

  <div class="form-actions">
    <button type="submit">
      <mat-icon class="me-1">save</mat-icon>
      {{ editingArticleId ? 'Update' : 'Add' }} Article
    </button>
    <button type="button" *ngIf="editingArticleId" class="cancel" (click)="cancelEdit()">
      <mat-icon class="me-1">cancel</mat-icon>
      Cancel
    </button>
  </div>
</form>

<hr />


<!-- admin-articles.component.html -->
<div *ngFor="let article of articles" class="article-card">
  <div class="article-header">
    <h3 [matTooltip]="article.title">{{ article.title }}</h3>
    <img [src]="'http://localhost:5000' + article.imageUrl" width="75" height="75" />
  </div>

  <!-- Proper paragraph rendering -->
<!-- Proper paragraph rendering with tooltip -->
<div
  class="article-body"
  [innerHTML]="convertToParagraphs(article.body)"
  [matTooltip]="article.body"
  matTooltipPosition="above"
>
</div>

  <mat-icon (click)="onEdit(article)" class="text-success">edit</mat-icon>
  <mat-icon (click)="onDelete(article.id)" class="text-danger">delete</mat-icon>
</div>